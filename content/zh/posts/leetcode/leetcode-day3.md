---
title: "Leetcodeæ¯æ—¥ä¸€é¢˜(3)"
date: 2020-08-17T23:18:31+08:00
description:
draft: false
hideToc: false
enableToc: true
enableTocContent: false
tocPosition: inner
author: Victor
authorEmoji: ğŸ‘»
image: https://i.loli.net/2020/08/15/XCv8hYSQUDmc4qN.png
libraries:
- katex
- mathjax
tags:
- Dijikstra
- Floyd
- æœ€çŸ­è·¯å¾„
- å›¾è®º
- leetcode
series:
- leetcode
- ç®—æ³•
categories:
-
---



#### [743. ç½‘ç»œå»¶è¿Ÿæ—¶é—´](https://leetcode-cn.com/problems/network-delay-time/)

æœ‰ `N` ä¸ªç½‘ç»œèŠ‚ç‚¹ï¼Œæ ‡è®°ä¸º `1` åˆ° `N`ã€‚

ç»™å®šä¸€ä¸ªåˆ—è¡¨ `times`ï¼Œè¡¨ç¤ºä¿¡å·ç»è¿‡**æœ‰å‘**è¾¹çš„ä¼ é€’æ—¶é—´ã€‚ `times[i] = (u, v, w)`ï¼Œå…¶ä¸­ `u` æ˜¯æºèŠ‚ç‚¹ï¼Œ`v` æ˜¯ç›®æ ‡èŠ‚ç‚¹ï¼Œ `w` æ˜¯ä¸€ä¸ªä¿¡å·ä»æºèŠ‚ç‚¹ä¼ é€’åˆ°ç›®æ ‡èŠ‚ç‚¹çš„æ—¶é—´ã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬ä»æŸä¸ªèŠ‚ç‚¹ `K` å‘å‡ºä¸€ä¸ªä¿¡å·ã€‚éœ€è¦å¤šä¹…æ‰èƒ½ä½¿æ‰€æœ‰èŠ‚ç‚¹éƒ½æ”¶åˆ°ä¿¡å·ï¼Ÿå¦‚æœä¸èƒ½ä½¿æ‰€æœ‰èŠ‚ç‚¹æ”¶åˆ°ä¿¡å·ï¼Œè¿”å› `-1`ã€‚

 

**ç¤ºä¾‹ï¼š**

![img](https://assets.leetcode.com/uploads/2019/05/23/931_example_1.png)

```
è¾“å…¥ï¼štimes = [[2,1,1],[2,3,1],[3,4,1]], N = 4, K = 2
è¾“å‡ºï¼š2
```

 

**æ³¨æ„:**

1. `N` çš„èŒƒå›´åœ¨ `[1, 100]` ä¹‹é—´ã€‚
2. `K` çš„èŒƒå›´åœ¨ `[1, N]` ä¹‹é—´ã€‚
3. `times` çš„é•¿åº¦åœ¨ `[1, 6000]` ä¹‹é—´ã€‚
4. æ‰€æœ‰çš„è¾¹ `times[i] = (u, v, w)` éƒ½æœ‰ `1 <= u, v <= N` ä¸” `0 <= w <= 100`ã€‚

### åˆ†æ

æœ¬é¢˜ä¸ºä¸€ä¸ªå›¾ç®—æ³•é¢˜ï¼Œä¸¤ç‚¹ä¹‹é—´çš„æ—¶é—´å¯ä»¥æŠ½è±¡æˆè·¯ç¨‹ï¼Œé‚£ä¹ˆæœ¬é¢˜ç›¸å½“äºæ±‚æŸä¸€ç‚¹åˆ°å…¶ä»–å„ç‚¹çš„æœ€çŸ­è·¯å¾„ï¼Œç„¶åæ±‚å‡ºå„ç‚¹æœ€çŸ­è·¯å¾„çš„æœ€å¤§å€¼ã€‚

å¸¸è§çš„æœ€çŸ­è·¯é—®é¢˜åˆ†ä¸ºä¸¤ç±»ï¼š**å•æºæœ€çŸ­è·¯**å’Œ**å¤šæºæœ€çŸ­è·¯**ã€‚å‰è€…åªéœ€è¦æ±‚ä¸€ä¸ª**å›ºå®šçš„èµ·ç‚¹**åˆ°å„ä¸ªé¡¶ç‚¹çš„æœ€çŸ­è·¯å¾„ï¼Œåè€…åˆ™è¦æ±‚å¾—å‡º**ä»»æ„ä¸¤ä¸ªé¡¶ç‚¹**ä¹‹é—´çš„æœ€çŸ­è·¯å¾„ã€‚

#### Dijkstraç®—æ³•

Dijkstra(è¿ªæ°æ–¯ç‰¹æ‹‰)ç®—æ³•æ˜¯å…¸å‹çš„**å•æºæœ€çŸ­è·¯å¾„ç®—æ³•**ï¼Œç”¨äºè®¡ç®—ä¸€ä¸ªèŠ‚ç‚¹åˆ°å…¶ä»–æ‰€æœ‰èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚ä¸»è¦ç‰¹ç‚¹æ˜¯ä»¥èµ·å§‹ç‚¹ä¸ºä¸­å¿ƒå‘å¤–å±‚å±‚æ‰©å±•ï¼Œç›´åˆ°æ‰©å±•åˆ°ç»ˆç‚¹ä¸ºæ­¢ã€‚ç®—æ³•ä¸»è¦çš„æ€æƒ³æ˜¯**è´ªå¿ƒæ³•**ã€‚

**é€‚ç”¨èŒƒå›´**

- 1ã€ä¸èƒ½å¤„ç†è´Ÿæƒè¾¹æˆ–ç¯
- 2ã€å¯ä»¥å¤„ç†æ­£æƒè¾¹
- 3ã€å¯ä»¥å¤„ç†æ— å‘å›¾å’Œæœ‰å‘å›¾

**ä½¿ç”¨æ­¥éª¤**

1. åˆå§‹åŒ–é‚»æ¥çŸ©é˜µ
2. åˆå§‹åŒ–è¿˜æœªç¡®å®šæœ€çŸ­è·¯å¾„çš„èŠ‚ç‚¹åˆ—è¡¨
3. åŒé‡å¾ªç¯ï¼š
   æœ€å¤–å±‚ä¸ºé™¤æºç‚¹ä¹‹å¤–çš„å…¶ä»–èŠ‚ç‚¹çš„éå†
   é‡Œé¢ä¸ºéå†å’Œæ›´æ–°æœªç¡®å®šè·ç¦»çš„èŠ‚ç‚¹åˆ—è¡¨çš„éå†
   3.1ã€ä»è¿˜æœªç¡®å®šæœ€çŸ­è·¯å¾„çš„èŠ‚ç‚¹åˆ—è¡¨ä¸­æ‰¾å‡ºè·ç¦»æºç‚¹æœ€è¿‘çš„èŠ‚ç‚¹
   3.2ã€æ›´æ–°è¿˜æœªç¡®å®šæœ€çŸ­è·¯å¾„çš„èŠ‚ç‚¹åˆ—è¡¨
   3.3ã€æ ¹æ®æ‰¾åˆ°çš„è¿™ä¸ªæœ€çŸ­è·¯å¾„èŠ‚ç‚¹ï¼Œæ›´æ–°æ¯ä¸€ä¸ªè¿˜æœªç¡®å®šæœ€çŸ­è·¯å¾„çš„èŠ‚ç‚¹åˆ°æºç‚¹çš„è·ç¦»
4. æ ¹æ®é¢˜ç›®è¦æ±‚è®¡ç®—ç»“æœ

#### Floydç®—æ³•

Floydç®—æ³•æ˜¯ä¸€ä¸ªç»å…¸çš„**åŠ¨æ€è§„åˆ’**ç®—æ³•ã€‚æ˜¯è§£å†³**ä»»æ„ä¸¤ç‚¹é—´çš„æœ€çŸ­è·¯å¾„**(ç§°ä¸ºå¤šæºæœ€çŸ­è·¯å¾„é—®é¢˜)çš„ä¸€ç§ç®—æ³•ï¼Œå¯ä»¥æ­£ç¡®å¤„ç†æœ‰å‘å›¾æˆ–è´Ÿæƒçš„æœ€çŸ­è·¯å¾„é—®é¢˜ã€‚

å…¶æ ¸å¿ƒæ€æƒ³å°±æ˜¯ä»ä»»æ„èŠ‚ç‚¹uåˆ°ä»»æ„èŠ‚ç‚¹vçš„æœ€çŸ­è·¯å¾„æœ‰2ç§ï¼š

- æ˜¯ç›´æ¥ä»uåˆ°v
- æ˜¯ä»uç»è¿‡è‹¥å¹²ä¸ªèŠ‚ç‚¹kåˆ°v

æ‰€ä»¥ï¼Œæˆ‘ä»¬å‡è®¾graph(u,v)ä¸ºèŠ‚ç‚¹uåˆ°èŠ‚ç‚¹vçš„æœ€çŸ­è·¯å¾„çš„è·ç¦»(å½“ç„¶ï¼Œä¸åŒçš„é¢˜ç›®ä»£è¡¨çš„ä¸ä¸€æ ·ï¼Œæ¯”å¦‚æœ‰çš„å¯èƒ½æ˜¯èŠ±è´¹ï¼Œéœ€è¦çµæ´»å˜é€š)ï¼Œå¯¹äºæ¯ä¸€ä¸ªèŠ‚ç‚¹k(1~Nä¸ªèŠ‚ç‚¹)ï¼Œæˆ‘ä»¬æ£€æŸ¥graph(u,k) + graph(k,v) < graph(u,v)æ˜¯å¦æˆç«‹ï¼Œå¦‚æœæˆç«‹ï¼Œè¯æ˜ä»uåˆ°kå†åˆ°vçš„è·¯å¾„æ¯”uç›´æ¥åˆ°vçš„è·¯å¾„çŸ­ï¼Œæˆ‘ä»¬ä¾¿è®¾ç½®graph(u,v) = graph(u,k) + graph(k,v)ï¼Œå½“æˆ‘ä»¬éå†å®Œæ‰€æœ‰èŠ‚ç‚¹kï¼Œgraph(u,v)ä¸­è®°å½•çš„ä¾¿æ˜¯uåˆ°vçš„æœ€çŸ­è·¯å¾„çš„è·ç¦»ã€‚

**é€‚ç”¨èŒƒå›´**

- 1ã€å¯ä»¥å¤„ç†è´Ÿæƒè¾¹
- 2ã€ä¸èƒ½å¤„ç†è´Ÿæƒç¯
- 3ã€å¯ä»¥å¤„ç†æ— å‘å›¾å’Œæœ‰å‘å›¾

**ä½¿ç”¨æ­¥éª¤**

1. åˆå§‹åŒ–é‚»æ¥çŸ©é˜µ

2. ä¸‰é‡å¾ªç¯ï¼š

   >   æœ€å¤–å±‚ä¸ºä¸­é—´èŠ‚ç‚¹kçš„éå†
   >   é‡Œé¢ä¸¤å±‚åˆ†åˆ«ä¸ºèŠ‚ç‚¹uå’ŒèŠ‚ç‚¹vçš„éå†

   

   2.1ã€æ ¹æ®kä¸ºä¸­é—´è·³èŠ‚ç‚¹æ›´æ–°(u, v)çš„æœ€çŸ­è·ç¦»

3. æ ¹æ®é¢˜ç›®è¦æ±‚è®¡ç®—ç»“æœ



### ä»£ç 

**Dijkstraç®—æ³•**

```cpp
class Solution {
public:
    int networkDelayTime(vector<vector<int>>& times, int N, int K) {
        const int INF = 102;
        vector<vector<int>> graph(N+1,vector<int>(N+1,INF));
        for(auto& v:times) graph[v[0]][v[1]] = v[2];
        vector<int> dist(N + 1,INF);
        vector<bool> st(N + 1,false);
        // è®¾ç½®èµ·å§‹ç‚¹
        dist[K] = 0;
        for(int i = 1;i < N;++i)    // å¤–å±‚å¾ªç¯N-1æ¬¡
        {
            int t = -1;
            int tmin = INF;
            for(int j = 1;j <= N;++j)
            {
                // ä»è¿˜æœªç¡®å®šæœ€çŸ­è·¯å¾„çš„èŠ‚ç‚¹åˆ—è¡¨ä¸­æ‰¾å‡ºè·ç¦»æºç‚¹æœ€è¿‘çš„èŠ‚ç‚¹
                if(!st[j] && (dist[j] < tmin))
                {
                     t = j;
                     tmin = dist[j];
                }
            }
            st[t] = true;   // æ ‡è®°ç¡®å®šæœ€çŸ­è·¯å¾„

            // ç”¨tæ›´æ–°å…¶ä»–ç‚¹çš„è·ç¦»
            for(int j = 1;j <= N;++j)
                dist[j] = min(dist[j],dist[t] + graph[t][j]);

        }
        int r = *max_element(dist.begin() + 1,dist.end());
        return r == INF ? -1:r;
    }
};
```

**Floydç®—æ³•**(ååˆ†æš´åŠ›)

```cpp
int Floyd(vector<vector<int>>& times, int N, int K)
    {
         const int INF = 102;
        vector<vector<int>> dist(N+1,vector<int>(N+1,INF));
        for(int i = 1;i <= N;++i) dist[i][i] = 0;
        for(auto& v:times) dist[v[0]][v[1]] = min(dist[v[0]][v[1]],v[2]);
        for(int k = 1;k <= N;++k)
            for(int i = 1;i <= N;++i)
                for(int j = 1;j <= N;++j)
                    if(i != j)
                        dist[i][j] = min(dist[i][j],dist[i][k]+dist[k][j]);
        int r = 0;
        for(int i = 1;i <= N;++i)
            r = max(r,dist[K][i]);
        return r == INF?-1:r;  
    }
```

**å †ä¼˜åŒ–ç‰ˆçš„Dijkstraç®—æ³•**

```cpp
class Solution {
public:
    int networkDelayTime(vector<vector<int>>& times, int N, int K) {
        const int INF = 0x3f3f3f3f;
        typedef pair<int, int> PII; // first:è·ç¦»; second: å‡ å·ç‚¹
        vector<bool> st(N+1, false); // æ˜¯å¦å·²å¾—åˆ°æœ€çŸ­è·ç¦»
        vector<int> dist(N+1, INF); // è·ç¦»èµ·å§‹ç‚¹çš„æœ€çŸ­è·ç¦»
        unordered_map<int, vector<PII>> graph; // é‚»æ¥è¡¨ï¼›u->v,æƒé‡w
        priority_queue<PII, vector<PII>, greater<PII>> heap; // å°é¡¶å †ï¼›ç»´æŠ¤åˆ°èµ·å§‹ç‚¹çš„æœ€çŸ­è·ç¦»å’Œç‚¹

        for (auto &t: times){ // åˆå§‹åŒ–é‚»æ¥è¡¨
            graph[t[0]].push_back({t[2],t[1]});
        }
        heap.push({0, K});
        dist[K] = 0;
        while(heap.size()){
            auto t = heap.top();
            heap.pop();
            int ver = t.second, distance = t.first;
            if (st[ver]) continue; // ä¹‹å‰æ›´æ–°è¿‡ï¼Œæ˜¯å†—ä½™å¤‡ä»½
            st[ver] = true;
            for (auto &p: graph[ver]){
                if (dist[p.second] > distance + p.first){ // ç”¨tå»æ›´æ–°å…¶ä»–ç‚¹åˆ°èµ·å§‹ç‚¹çš„æœ€çŸ­è·ç¦»
                    dist[p.second] = distance + p.first;
                    heap.push({dist[p.second], p.second});
                }
            }
        }
        int ans = *max_element(dist.begin()+1, dist.end());
        return ans == INF ? -1: ans;
    }
};
```



---

å‚è€ƒé“¾æ¥ï¼š

1. [å­¦å›¾è®ºï¼Œä½ çœŸçš„äº†è§£æœ€çŸ­è·¯å—ï¼Ÿ](https://www.luogu.com.cn/blog/FrozaFerrari/xue-tu-lun-ni-zhen-di-liao-xie-zui-duan-lu-ma-post)
2. [https://leetcode-cn.com/problems/network-delay-time/solution/csetban-dui-you-hua-dijkstra-by-ray-152/](https://leetcode-cn.com/problems/network-delay-time/solution/csetban-dui-you-hua-dijkstra-by-ray-152/)