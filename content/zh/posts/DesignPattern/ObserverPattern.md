---
title: è§‚å¯Ÿè€…æ¨¡å¼
date: 2022-01-03T22:41:31+08:00
description: ä¸€ä¸ªæ¯”å–»ï¼šæŠ¥çº¸è®¢é˜…ï¼ˆå‡ºç‰ˆè€…å’Œè®¢é˜…è€…ï¼‰ã€‚
draft: true
hideToc: false
enableToc: true
enableTocContent: false
tocPosition: outer
author: Victor
authorEmoji: ğŸª¶
image: https://cos.jiahongw.com/uPic/3881299.png
plantuml: true
libraries:
- mermaid
tags:
- è§‚å¯Ÿè€…æ¨¡å¼
- è¡Œä¸ºæ¨¡å¼
series:
- è®¾è®¡æ¨¡å¼
categories:
-
---



<!--ObserverPattern-->

### å®šä¹‰

è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†å¯¹è±¡ä¹‹é—´çš„**ä¸€å¯¹å¤š**ä¾èµ–ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜çŠ¶æ€æ—¶ï¼Œå®ƒçš„æ‰€æœ‰ä¾èµ–è€…éƒ½ä¼šæ”¶åˆ°é€šçŸ¥å¹¶ä¸”è‡ªåŠ¨æ›´æ–°ã€‚

> ä¸€ä¸ªæ¯”å–»ï¼šæŠ¥çº¸è®¢é˜…ï¼ˆå‡ºç‰ˆè€…å’Œè®¢é˜…è€…ï¼‰

### æ¶æ„

```mermaid
classDiagram

class Subject {
	<<interface>>
	+ registerObserver()
	+ removeObserver()
	+ notifyObserver()
}

class ConcreteSubject {
	- List<Observer> observers
	+ registerObserver()
	+ removeObserver()
	+ notifyObserver()
}

class Observer {
	<<interface>>
	+ update()
}

class ConcreteObeserver {
  - Subject subject
	+ update()
}
Subject --> Observer : å¤šä¸ªè§‚å¯Ÿè€… 

ConcreteSubject ..|> Subject : å®ç°
ConcreteObeserver ..|> Observer : å®ç°
ConcreteObeserver --> ConcreteSubject : è®¢é˜…ä¸»é¢˜

```

è§‚å¯Ÿè€…ä¾èµ–ä¸»é¢˜ã€‚è§‚å¯Ÿè€…æ¨¡å¼æä¾›äº†ä¸€ç§å¯¹è±¡è®¾è®¡ï¼Œè®©ä¸»é¢˜å’Œè§‚å¯Ÿè€…ä¹‹é—´æ¾è€¦åˆã€‚ä»–ä»¬ä¾ç„¶å¯ä»¥äº¤äº’ï¼Œä½†æ˜¯ä¸å¿…æ¸…æ¥šå½¼æ­¤çš„ç»†èŠ‚ã€‚

ä¸»é¢˜ä¸»åŠ¨æ¨æ•°æ®å’Œè§‚å¯Ÿè€…è‡ªå·±æ‹‰æ•°æ®éƒ½å¯ä»¥ï¼Œä½†æ˜¯å…³é”®åœ¨äºä¸»é¢˜å¿…é¡»å¾—é€šçŸ¥è§‚å¯Ÿè€…ã€‚

Q & Aï¼š

- ä¸ºä»€ä¹ˆè§‚å¯Ÿè€…è¦åŒ…å«ä¸€ä¸ªä¸»é¢˜ï¼ˆsubjectï¼‰çš„å¼•ç”¨ï¼Ÿ

  ä»¥åå¯èƒ½éœ€è¦å–æ¶ˆæ³¨å†Œï¼Œä¿å­˜ä¸€ä¸ªå¼•ç”¨ä¼šæ›´åŠ æ–¹ä¾¿ã€‚

- â€œç”Ÿäº§è€…-æ¶ˆè´¹è€…â€æ¨¡å‹å’Œè§‚å¯Ÿè€…æ¨¡å¼çš„åŒºåˆ«å’Œè”ç³»ï¼Ÿ

  ç”Ÿäº§-æ¶ˆè´¹æ¨¡å‹ï¼Œæ˜¯å¤šå¯¹å¤šçš„å…³ç³»ï¼Œä¸€èˆ¬ä»¥å¼‚æ­¥çš„æ–¹å¼å®ç°ï¼›è€Œè§‚å¯Ÿè€…æ¨¡å¼ï¼ˆå‘å¸ƒ-è®¢é˜…æ¨¡å‹ï¼‰ï¼Œæ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œå¯ä»¥ä»¥åŒæ­¥çš„æ–¹å¼å®ç°ï¼Œä¹Ÿå¯ä»¥ä»¥å¼‚æ­¥çš„æ–¹å¼å®ç°ã€‚

  > å‘å¸ƒè®¢é˜…å’Œç”Ÿäº§æ¶ˆè´¹æ¨¡å‹æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼šå‘å¸ƒè€…ï¼ˆå¯è§‚æµ‹å¯¹è±¡ï¼‰æ˜¯çŸ¥é“è®¢é˜…è€…ï¼ˆè§‚å¯Ÿå¯¹è±¡ï¼‰çš„å­˜åœ¨ï¼Œå› ä¸ºå®ƒéœ€è¦éå†è®¢é˜…åˆ—è¡¨å»å‘å¸ƒäº‹ä»¶ï¼›è€Œç”Ÿäº§æ¶ˆè´¹æ¨¡å‹å› ä¸ºæœ‰ä¸­é—´æ¶ˆæ¯ä»£ç†çš„å­˜åœ¨ï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…å®Œå…¨ä¸çŸ¥é“å¯¹æ–¹çš„å­˜åœ¨ï¼Œå®Œå…¨è§£è€¦ï¼

### Javaå†…ç½®çš„è§‚å¯Ÿè€…æ¨¡å¼

java.utilåŒ…ä¸‹çš„Observableå’ŒObserverã€‚

<img src="https://cos.jiahongw.com/uPic/image-20220103234923835.png" alt="image-20220103234923835" style="zoom:33%;" />



### Google EventBus

å¼‚æ­¥éé˜»å¡è§‚å¯Ÿè€…æ¨¡å¼çš„å®ç°ã€‚

ç®€å•çš„å®ç°æ–¹æ³•ï¼š

1. åœ¨å¯è§‚å¯Ÿå¯¹è±¡äº†é‡Œé¢å¯¹å„ä¸ªè§‚å¯Ÿè€…çš„é€šçŸ¥æ”¹æˆå¼‚æ­¥æ“ä½œã€‚ï¼ˆå¯ç”¨çº¿ç¨‹æ± ï¼‰
2. åœ¨è§‚å¯Ÿè€…å†…éƒ¨çš„å¤„ç†æ¶ˆæ¯æ”¹ä¸ºå¼‚æ­¥æ“ä½œã€‚ï¼ˆä¸å¯ç”¨çº¿ç¨‹æ± ï¼‰

> ä¸¤è€…éƒ½èƒ½å¤Ÿå¼€å¯çº¿ç¨‹å»è·‘ï¼Œå¾ˆå¿«å°±è¿”å›ï¼Œä¸é˜»å¡ã€‚

é’ˆå¯¹å¼‚æ­¥éé˜»å¡è§‚å¯Ÿè€…æ¨¡å¼çš„å®ç°ï¼ŒæŠ½è±¡çš„EventBusæ¡†æ¶å¯ä»¥è®©æˆ‘ä»¬èšç„¦äºä¸šåŠ¡ã€‚

### ä½¿ç”¨åœºæ™¯

1. æ¶ˆæ¯é˜Ÿåˆ—
2. å›è°ƒå°±æ˜¯ä¸€ç§è§‚å¯Ÿè€…æ¨¡å¼
3. Google EventBus
4. é‚®ä»¶è®¢é˜…
5. RSS
6. ååº”å¼RxJava
7. JDK(CompletableFuture)

---

***Reference***:

1. æå®¢æ—¶é—´-è§‚å¯Ÿè€…æ¨¡å¼
2. [è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼](https://refactoringguru.cn/design-patterns/observer)
