---
title: 52æ˜æ™ºåœ°ä½¿ç”¨é‡è½½
date: 2021-11-14T17:25:37+08:00
description:
draft: true
hideToc: false
enableToc: true
enableTocContent: false
tocPosition: outer
author: Victor
authorEmoji: ğŸª¶
image:
plantuml: true
libraries:
- katex
- mathjax
tags:
-
series:
-
categories:
-
---



å‡½æ•°çš„é‡è½½æ˜¯åœ¨ç¼–è¯‘çš„æ—¶å€™å°±ç¡®å®šäº†çš„ï¼Œå¾ˆå¤šæ—¶å€™å®¹æ˜“è®¤ä¸ºå®ƒåœ¨è¿è¡Œæ—¶æœŸè‡ªåŠ¨åˆ¤æ–­æ‰§è¡Œå“ªä¸ªå‡½æ•°ã€‚ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š

```java
// Broken! - What does this program print?
public class CollectionClassifier {
    public static String classify(Set<?> s) {
        return "Set";
    }

    public static String classify(List<?> lst) {
        return "List";
    }

    public static String classify(Collection<?> c) {
        return "Unknown Collection";
    }

    public static void main(String[] args) {
        Collection<?>[] collections = {
            new HashSet<String>(),new ArrayList<BigInteger>(),new HashMap<String, String>().values()
        };
        for (Collection<?> c : collections)
            System.out.println(classify(c));
    }
}
```

æœŸæœ›è¿™ä¸ªç¨‹åºæ‰“å° Setï¼Œç„¶åæ˜¯ List å’Œ Unknown Collectionï¼Œä½†æ˜¯å®ƒæ²¡æœ‰è¿™æ ·åšã€‚å®ƒæ‰“å° Unknown Collection ä¸‰æ¬¡ã€‚å› ä¸ºåœ¨ç¼–è¯‘æœŸå”¯ä¸€é€‚é…ä¸‰ä¸ªå®ä¾‹çš„å‡½æ•°å°±åªæœ‰ `public static String classify(Collection<?> c)`

> é‡è½½æ–¹æ³•çš„é€‰æ‹©æ˜¯é™æ€çš„ï¼Œè€Œè¦†ç›–æ³•çš„é€‰æ‹©æ˜¯åŠ¨æ€çš„

ä¿®å¤ CollectionClassifier ç¨‹åºçš„æœ€ä½³æ–¹æ³•æ˜¯ç”¨ä¸€ä¸ªæ‰§è¡Œæ˜¾å¼ instanceof æµ‹è¯•çš„æ–¹æ³•æ›¿æ¢ classification çš„æ‰€æœ‰ä¸‰ä¸ªé‡è½½ï¼š

```java
public static String classify(Collection<?> c) {
    return c instanceof Set ? "Set" :c instanceof List ? "List" : "Unknown Collection";
}
```

é‡è½½å¾ˆå®¹æ˜“æ··æ·†æˆ‘ä»¬çš„æœŸæœ›ï¼Œæ‰€ä»¥ï¼Œåº”è¯¥é¿å…æ··æ·†é‡è½½çš„ç”¨æ³•ã€‚æœ€ä¿é™©çš„æ–¹æ³•æ˜¯æ°¸è¿œä¸è¦ç¼–å†™å…·æœ‰ç›¸åŒæ•°é‡å‚æ•°çš„ä¸¤ä¸ªé‡è½½æ–¹æ³•ã€‚æˆ–è€…ä¸ºæ–¹æ³•æä¾›ä¸åŒçš„åç§°ï¼Œè€Œä¸æ˜¯é‡è½½ä»–ä»¬ã€‚ä¾‹å¦‚ `writeBoolean(boolean)`ã€`writeInt(int)` å’Œ `writeLong(long)`ç­‰æ–¹æ³•ã€‚

> å¯¹äºæ„é€ å‡½æ•°ï¼Œä½ æ²¡æœ‰ä½¿ç”¨ä¸åŒåç§°çš„æœºä¼šï¼šä¸€ä¸ªç±»çš„å¤šä¸ªæ„é€ å‡½æ•°åªèƒ½é‡è½½ã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œä½ å¯ä»¥é€‰æ‹©å¯¼å‡ºé™æ€å·¥å‚è€Œä¸æ˜¯æ„é€ å‡½æ•°ã€‚ä½ å¯èƒ½ä¼šæœ‰æœºä¼šå¯¼å‡ºå…·æœ‰ç›¸åŒæ•°é‡å‚æ•°çš„å¤šä¸ªæ„é€ å‡½æ•°ï¼Œå› æ­¤çŸ¥é“å¦‚ä½•å®‰å…¨åœ°æ‰§è¡Œæ˜¯æœ‰å¿…è¦çš„ã€‚

å› ä¸ºè¦å¯¹ç°æœ‰ç±»è¿›è¡Œæ”¹é€ ä»¥å®ç°æ–°æ¥å£ï¼Œé‚£ä¹ˆåº”è¯¥ç¡®ä¿åœ¨ä¼ é€’ç›¸åŒçš„å‚æ•°æ—¶ï¼Œæ‰€æœ‰é‡è½½çš„è¡Œä¸ºéƒ½æ˜¯ç›¸åŒçš„ã€‚å¦‚æœä½ åšä¸åˆ°è¿™ä¸€ç‚¹ï¼Œç¨‹åºå‘˜å°†å¾ˆéš¾æœ‰æ•ˆåœ°ä½¿ç”¨é‡è½½æ–¹æ³•æˆ–æ„é€ å‡½æ•°ï¼Œä»–ä»¬å°†æ— æ³•ç†è§£ä¸ºä»€ä¹ˆå®ƒä¸èƒ½å·¥ä½œã€‚

> ä¾‹å¦‚ï¼ŒString å¯¼å‡ºä¸¤ä¸ªé‡è½½çš„é™æ€å·¥å‚æ–¹æ³• `valueOf(char[])` å’Œ `valueOf(Object)`ï¼Œå®ƒä»¬åœ¨ä¼ é€’ç›¸åŒçš„å¯¹è±¡å¼•ç”¨æ—¶æ‰§è¡Œå®Œå…¨ä¸åŒçš„æ“ä½œã€‚è¿™æ ·åšæ²¡æœ‰çœŸæ­£çš„ç†ç”±ï¼Œå®ƒåº”è¯¥è¢«è§†ä¸ºä¸€ç§å¼‚å¸¸è¡Œä¸ºï¼Œæœ‰å¯èƒ½é€ æˆçœŸæ­£çš„æ··ä¹±ã€‚è¿˜æœ‰å°±æ˜¯é›†åˆç±»setã€listç­‰çš„removeå‡½æ•°ï¼Œæœ‰ä¸€äº›æ˜¯åˆ é™¤æŒ‡å®šçš„å€¼ï¼Œæœ‰ä¸€äº›æ˜¯åˆ é™¤æŒ‡å®šä¸‹æ ‡çš„å€¼ï¼Œå¾ˆå®¹æ˜“æ··ä¹±ã€‚ç‰¹åˆ«æ˜¯Javaæœ‰äº†è‡ªåŠ¨è£…ç®±æœºåˆ¶ä¹‹åï¼Œè¿™ä¸ªåˆæ›´åŠ æ··ä¹±äº†ã€‚

---

***Reference***:
